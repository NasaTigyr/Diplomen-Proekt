I'll design a database schema for your sports competition management system and explain it in simple terms. Let's break this down into tables and relationships:

Now let me explain this database design in simple terms:

## Simple Explanation

Imagine we're building a sports competition system like a big box of LEGO pieces that fit together:

1. **Users**: This is everyone who uses the system. They can be:
   - Regular users (just browsing)
   - Coaches (who run clubs and create events)
   - Athletes (who join clubs and compete)

2. **Clubs**: These are like teams. Each club:
   - Is owned by one coach
   - Can have many athletes as members

3. **Events**: These are competitions that coaches create. Each event has:
   - Basic info (name, description, banner image)
   - Location and dates
   - Two types: "team" (where coaches register their athletes) or "free_for_all" (where athletes register themselves)

4. **Categories**: These are specific competitions within an event, like "Under-18 Boys Kumite". Each category:
   - Belongs to one event
   - Has an age group (under 8, under 12, etc.)
   - Has a gender group (male, female, or mixed)

5. **Registrations**: There are two types:
   - Individual registrations: when athletes sign up themselves
   - Team registrations: when coaches sign up their athletes

6. **Draws**: These are the competition brackets/schedules:
   - One draw per category
   - Generated randomly for fairness
   - Can be exported as files

## How It Works Together

1. A coach creates an account and sets up a club
2. Athletes create accounts and join the coach's club
3. The coach creates an event with different categories
4. For "team" events, the coach registers club members
5. For "free_for_all" events, athletes register themselves
6. The system generates random draws for each category
7. The event creator can upload a timetable file

## For Your Middleware, Models, and Controllers

- Create models for each table in the database
- Controllers should handle:
  - User registration and authentication
  - Club management (create, join, etc.)
  - Event creation and management
  - Category setup
  - Registration processing
  - Draw generation and export
  - Timetable file upload and display

For the file handling:
- For draws, generate simple text files or HTML files that can be opened in a browser
- For timetables, accept PDF or image uploads which are simple to view

This system keeps everything organized while being flexible enough to handle different types of events and registrations. The database schema captures all the relationships between users, clubs, events, and registrations.
