Базата данни се намира на /var/lib/mysql/

-- Таблица за състезанията
CREATE TABLE events (
    id INT PRIMARY KEY AUTO_INCREMENT,        -- Уникален идентификатор на събитието
    name VARCHAR(255) NOT NULL,               -- Име на събитието
    date DATE NOT NULL,                       -- Дата на събитието
    created_by INT,                           -- Идентификатор на организатора
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- Таблица за категориите (могат да бъдат мъжки, женски, и килограми)
CREATE TABLE categories (
    id INT PRIMARY KEY AUTO_INCREMENT,        -- Уникален идентификатор на категорията
    event_id INT,                             -- Идентификатор на събитието, където принадлежи категорията
    gender ENUM('male', 'female') NOT NULL,   -- Пол за категорията
    weight_category VARCHAR(100),             -- Категория по килограми
    FOREIGN KEY (event_id) REFERENCES events(id)
);

-- Таблица за състезателите
CREATE TABLE participants (
    id INT PRIMARY KEY AUTO_INCREMENT,        -- Уникален идентификатор на състезателя
    name VARCHAR(255) NOT NULL,               -- Име на състезателя
    category_id INT,                          -- Идентификатор на категорията
    profile_picture VARCHAR(255),             -- Път до профилната снимка
    FOREIGN KEY (category_id) REFERENCES categories(id)
);

-- Таблица за федерациите
CREATE TABLE federations (
    id INT PRIMARY KEY AUTO_INCREMENT,        -- Уникален идентификатор на федерацията
    name VARCHAR(255) NOT NULL,               -- Име на федерацията
    country VARCHAR(100) NOT NULL             -- Страна на федерацията
);

-- Таблица за отборите
CREATE TABLE teams (
    id INT PRIMARY KEY AUTO_INCREMENT,        -- Уникален идентификатор на отбора
    name VARCHAR(255) NOT NULL,               -- Име на отбора
    federation_id INT,                        -- Идентификатор на федерацията, на която принадлежи
    FOREIGN KEY (federation_id) REFERENCES federations(id)
);

-- Таблица за треньорите
CREATE TABLE coaches (
    id INT PRIMARY KEY AUTO_INCREMENT,        -- Уникален идентификатор на треньора
    user_id INT,                              -- Идентификатор на потребителя, който е треньор
    team_id INT,                              -- Идентификатор на отбора
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (team_id) REFERENCES teams(id)
);

-- Таблица за записване на състезатели в отборите (могат да се записват както индивидуално, така и чрез треньора)
CREATE TABLE team_participants (
    id INT PRIMARY KEY AUTO_INCREMENT,        -- Уникален идентификатор на записа
    participant_id INT,                       -- Идентификатор на състезателя
    team_id INT,                              -- Идентификатор на отбора
    FOREIGN KEY (participant_id) REFERENCES participants(id),
    FOREIGN KEY (team_id) REFERENCES teams(id)
);

-- Таблица за жребия
CREATE TABLE draw (
    id INT PRIMARY KEY AUTO_INCREMENT,        -- Уникален идентификатор на жребия
    category_id INT,                          -- Идентификатор на категорията
    participant_id INT,                       -- Идентификатор на състезателя
    draw_position INT,                        -- Позиция в жребия
    FOREIGN KEY (category_id) REFERENCES categories(id),
    FOREIGN KEY (participant_id) REFERENCES participants(id)
);
